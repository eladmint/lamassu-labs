<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrustWrapper Senpi - Live Data Dashboard</title>
    <style>
        /* Design System - Nuru AI Colors & Typography */
        :root {
            --primary-50: #f3f1ff;
            --primary-500: #7C3AED;
            --primary-600: #6D28D9;
            --primary-950: #2e1065;

            --accent-500: #C65D3C;
            --accent-600: #B85A37;

            --success: #059669;
            --warning: #D97706;
            --error: #DC2626;
            --trust: #2563EB;

            --neutral-50: #f9fafb;
            --neutral-100: #f3f4f6;
            --neutral-200: #e5e7eb;
            --neutral-500: #6b7280;
            --neutral-700: #374151;
            --neutral-900: #111827;

            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--neutral-50);
            color: var(--neutral-700);
            line-height: 1.6;
        }

        /* Layout Components */
        .dashboard-layout {
            display: grid;
            grid-template-columns: 240px 1fr;
            min-height: 100vh;
        }

        @media (max-width: 768px) {
            .dashboard-layout {
                grid-template-columns: 1fr;
            }
            .sidebar {
                display: none;
            }
        }

        /* Sidebar Component */
        .sidebar {
            background: white;
            border-right: 1px solid var(--neutral-200);
            padding: var(--space-6);
        }

        .sidebar-brand {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            margin-bottom: var(--space-8);
            font-weight: 600;
            color: var(--primary-600);
        }

        .sidebar-section {
            margin-bottom: var(--space-6);
        }

        .sidebar-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--neutral-500);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--space-3);
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-3) var(--space-4);
            border-radius: 8px;
            color: var(--neutral-700);
            text-decoration: none;
            transition: all 0.2s;
            margin-bottom: var(--space-2);
            cursor: pointer;
        }

        .sidebar-item:hover {
            background: var(--primary-50);
            color: var(--primary-600);
        }

        .sidebar-item.active {
            background: var(--primary-500);
            color: white;
        }

        /* Main Content */
        .main-content {
            padding: var(--space-8);
            overflow-y: auto;
        }

        /* Page Container */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-8);
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--neutral-900);
        }

        .header-subtitle {
            color: var(--neutral-500);
            margin-top: var(--space-2);
        }

        /* Button Component */
        .button {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-3) var(--space-4);
            border-radius: 8px;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            font-family: inherit;
        }

        .button-primary {
            background: var(--primary-500);
            color: white;
        }

        .button-primary:hover {
            background: var(--primary-600);
        }

        .button-secondary {
            background: white;
            color: var(--neutral-700);
            border: 1px solid var(--neutral-200);
        }

        .button-secondary:hover {
            background: var(--neutral-50);
        }

        .button-success {
            background: var(--success);
            color: white;
        }

        .button-warning {
            background: var(--warning);
            color: white;
        }

        /* Grid System */
        .grid {
            display: grid;
            gap: var(--space-6);
        }

        .grid-cols-1 { grid-template-columns: 1fr; }
        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-cols-4 { grid-template-columns: repeat(4, 1fr); }

        @media (max-width: 1024px) {
            .grid-cols-4 { grid-template-columns: repeat(2, 1fr); }
            .grid-cols-3 { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 640px) {
            .grid-cols-4,
            .grid-cols-3,
            .grid-cols-2 { grid-template-columns: 1fr; }
        }

        /* Card Component */
        .card {
            background: white;
            border: 1px solid var(--neutral-200);
            border-radius: 12px;
            padding: var(--space-6);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
        }

        .card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            margin-bottom: var(--space-4);
        }

        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--neutral-900);
            margin-bottom: var(--space-2);
        }

        .card-subtitle {
            color: var(--neutral-500);
            font-size: 0.875rem;
        }

        /* MetricCard Component */
        .metric-card {
            text-align: center;
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-600);
            margin-bottom: var(--space-2);
        }

        .metric-label {
            color: var(--neutral-500);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .metric-trend {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            margin-top: var(--space-3);
            font-size: 0.875rem;
        }

        .trend-positive { color: var(--success); }
        .trend-negative { color: var(--error); }

        /* Badge Component */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .badge-success {
            background: #D1FAE5;
            color: var(--success);
        }

        .badge-warning {
            background: #FEF3C7;
            color: var(--warning);
        }

        .badge-error {
            background: #FEE2E2;
            color: var(--error);
        }

        .badge-trust {
            background: #DBEAFE;
            color: var(--trust);
        }

        /* Alert Component */
        .alert {
            padding: var(--space-4);
            border-radius: 8px;
            margin-bottom: var(--space-4);
            border-left: 4px solid;
        }

        .alert-success {
            background: #D1FAE5;
            border-color: var(--success);
            color: #065F46;
        }

        .alert-warning {
            background: #FEF3C7;
            border-color: var(--warning);
            color: #92400E;
        }

        .alert-trust {
            background: #DBEAFE;
            border-color: var(--trust);
            color: #1E40AF;
        }

        /* Status Indicators */
        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: var(--space-2);
        }

        .status-active { background: var(--success); }
        .status-warning { background: var(--warning); }
        .status-error { background: var(--error); }

        /* Activity Feed */
        .activity-feed {
            max-height: 400px;
            overflow-y: auto;
        }

        .activity-item {
            display: flex;
            gap: var(--space-3);
            padding: var(--space-3) 0;
            border-bottom: 1px solid var(--neutral-100);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            font-weight: 500;
            color: var(--neutral-900);
        }

        .activity-description {
            color: var(--neutral-500);
            font-size: 0.875rem;
            margin-top: 2px;
        }

        .activity-time {
            color: var(--neutral-400);
            font-size: 0.75rem;
            margin-top: var(--space-2);
        }

        /* Progress Bar */
        .progress-bar {
            background: var(--neutral-200);
            border-radius: 4px;
            height: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary-500);
            transition: width 0.3s;
        }

        /* Live Data Indicators */
        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            font-size: 0.75rem;
            color: var(--success);
        }

        .pulse-dot {
            width: 6px;
            height: 6px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Loading Animation */
        .loading-spinner {
            width: 16px;
            height: 16px;
            border: 2px solid var(--neutral-200);
            border-top: 2px solid var(--primary-500);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Chart Styles */
        .chart-container {
            position: relative;
            height: 200px;
            margin-top: var(--space-4);
        }

        /* Real-time Price Display */
        .price-display {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-4);
            background: var(--neutral-50);
            border-radius: 8px;
            margin-bottom: var(--space-4);
        }

        .price-symbol {
            font-weight: 600;
            color: var(--neutral-900);
        }

        .price-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-600);
        }

        .price-change {
            font-size: 0.875rem;
            font-weight: 500;
        }

        .price-change.positive {
            color: var(--success);
        }

        .price-change.negative {
            color: var(--error);
        }

        /* Blockchain Data */
        .blockchain-data {
            padding: var(--space-3);
            background: var(--neutral-50);
            border-radius: 8px;
            margin-bottom: var(--space-3);
        }

        .data-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--space-2);
        }

        .data-label {
            color: var(--neutral-500);
            font-size: 0.875rem;
        }

        .data-value {
            font-weight: 500;
            color: var(--neutral-900);
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
    <div class="dashboard-layout">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-brand">
                <span style="font-size: 1.5rem;">🛡️</span>
                <span>TrustWrapper</span>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Overview</div>
                <div class="sidebar-item active" onclick="showPage('dashboard')">
                    <span>📊</span>
                    <span>Dashboard</span>
                </div>
                <div class="sidebar-item" onclick="showPage('agents')">
                    <span>🤖</span>
                    <span>AI Agents</span>
                </div>
                <div class="sidebar-item" onclick="showPage('verifications')">
                    <span>🔍</span>
                    <span>Verifications</span>
                </div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Integration</div>
                <div class="sidebar-item" onclick="showPage('senpi')">
                    <span>🎯</span>
                    <span>Senpi Skills</span>
                </div>
                <div class="sidebar-item" onclick="showPage('trading')">
                    <span>📈</span>
                    <span>Trading Analysis</span>
                </div>
                <div class="sidebar-item" onclick="showPage('compliance')">
                    <span>📋</span>
                    <span>Compliance</span>
                </div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Settings</div>
                <div class="sidebar-item" onclick="showPage('alerts')">
                    <span>🔔</span>
                    <span>Alerts</span>
                </div>
                <div class="sidebar-item" onclick="showPage('settings')">
                    <span>⚙️</span>
                    <span>Configuration</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Page -->
            <div id="dashboard" class="page active">
                <!-- Header -->
                <div class="header">
                    <div>
                        <h1>TrustWrapper Senpi Integration</h1>
                        <div class="header-subtitle">
                            Real-time AI verification and compliance monitoring
                            <span class="live-indicator">
                                <span class="pulse-dot"></span>
                                Live
                            </span>
                        </div>
                    </div>
                    <div style="display: flex; gap: var(--space-3);">
                        <button class="button button-secondary" onclick="refreshData()">
                            <span>🔄</span>
                            Refresh
                        </button>
                        <button class="button button-primary" onclick="runVerification()">
                            <span>🛡️</span>
                            New Verification
                        </button>
                    </div>
                </div>

                <!-- API Status Alert -->
                <div id="api-status-alert" class="alert alert-trust">
                    <strong>🔗 API Integration Status:</strong>
                    <span id="api-status-text">Checking connections...</span>
                </div>

                <!-- Key Metrics -->
                <div class="grid grid-cols-4" style="margin-bottom: var(--space-8);">
                    <div class="card metric-card">
                        <div class="metric-value" id="total-verifications">1,247</div>
                        <div class="metric-label">Total Verifications</div>
                        <div class="metric-trend trend-positive">
                            <span>↗️</span>
                            <span>+23.5% from last week</span>
                        </div>
                    </div>

                    <div class="card metric-card">
                        <div class="metric-value" id="active-agents">5</div>
                        <div class="metric-label">Active Agents</div>
                        <div class="metric-trend trend-positive">
                            <span>✅</span>
                            <span>All agents operational</span>
                        </div>
                    </div>

                    <div class="card metric-card">
                        <div class="metric-value text-success">A+</div>
                        <div class="metric-label">Trust Score</div>
                        <div class="metric-trend">
                            <span>🏆</span>
                            <span>Excellent rating</span>
                        </div>
                    </div>

                    <div class="card metric-card">
                        <div class="metric-value text-success">Low</div>
                        <div class="metric-label">Risk Assessment</div>
                        <div class="metric-trend trend-positive">
                            <span>🛡️</span>
                            <span>Secure operations</span>
                        </div>
                    </div>
                </div>

                <!-- Real-time Dashboard Content -->
                <div class="grid grid-cols-2" style="margin-bottom: var(--space-8);">
                    <!-- Live Market Data -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Live Market Data</div>
                            <div class="card-subtitle">Real-time price feeds from CoinGecko</div>
                        </div>

                        <div id="market-data-container">
                            <div class="price-display">
                                <div class="price-symbol">BTC</div>
                                <div class="price-value" id="btc-price">Loading...</div>
                                <div class="price-change" id="btc-change">--</div>
                            </div>

                            <div class="price-display">
                                <div class="price-symbol">ETH</div>
                                <div class="price-value" id="eth-price">Loading...</div>
                                <div class="price-change" id="eth-change">--</div>
                            </div>

                            <div style="margin-top: var(--space-4);">
                                <div class="data-row">
                                    <div class="data-label">Last Updated:</div>
                                    <div class="data-value" id="price-timestamp">--</div>
                                </div>
                                <div class="data-row">
                                    <div class="data-label">Data Source:</div>
                                    <div class="data-value">CoinGecko API</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Live Activity Feed -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Live Activity</div>
                            <div class="card-subtitle">Recent verification events</div>
                        </div>

                        <div class="activity-feed" id="activity-feed">
                            <!-- Activity items will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Blockchain & Partnership Stats -->
                <div class="grid grid-cols-3">
                    <!-- Blockchain Verification Status -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Blockchain Verification</div>
                            <div class="card-subtitle">NOWNodes integration status</div>
                        </div>

                        <div id="blockchain-status">
                            <div class="blockchain-data">
                                <div class="data-row">
                                    <div class="data-label">Ethereum Network:</div>
                                    <div class="data-value" id="eth-network-status">Checking...</div>
                                </div>
                                <div class="data-row">
                                    <div class="data-label">Latest Block:</div>
                                    <div class="data-value" id="eth-latest-block">--</div>
                                </div>
                                <div class="data-row">
                                    <div class="data-label">Test Address Balance:</div>
                                    <div class="data-value" id="test-balance">--</div>
                                </div>
                            </div>

                            <button class="button button-secondary" style="width: 100%;" onclick="testBlockchainConnection()">
                                🔗 Test Blockchain Connection
                            </button>
                        </div>
                    </div>

                    <!-- API Integration Status -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">API Integration Status</div>
                            <div class="card-subtitle">Real data connections</div>
                        </div>

                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-3);">
                            <span class="text-sm">NOWNodes Blockchain</span>
                            <span id="nownodes-status" class="badge badge-warning">⏳ Checking</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-3);">
                            <span class="text-sm">CoinGecko Market Data</span>
                            <span id="coingecko-status" class="badge badge-warning">⏳ Checking</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-4);">
                            <span class="text-sm">TrustWrapper Engine</span>
                            <span class="badge badge-success">✅ Operational</span>
                        </div>

                        <button class="button button-secondary" style="width: 100%;" onclick="testApiConnections()">
                            🔄 Test All Connections
                        </button>
                    </div>

                    <!-- Partnership Metrics -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Senpi Partnership</div>
                            <div class="card-subtitle">Revenue opportunity metrics</div>
                        </div>

                        <div style="margin-bottom: var(--space-4);">
                            <div class="data-row">
                                <div class="data-label">Year 1 Projection:</div>
                                <div class="data-value text-success">$425K+</div>
                            </div>
                            <div class="data-row">
                                <div class="data-label">Year 3 Target:</div>
                                <div class="data-value text-success">$5.8M</div>
                            </div>
                            <div class="data-row">
                                <div class="data-label">Integration Status:</div>
                                <div class="data-value">✅ Complete</div>
                            </div>
                        </div>

                        <button class="button button-primary" style="width: 100%;" onclick="contactSenpi()">
                            📧 Contact Jason Goldberg
                        </button>
                    </div>
                </div>
            </div>

            <!-- AI Agents Page -->
            <div id="agents" class="page">
                <div class="header">
                    <div>
                        <h1>AI Agents Management</h1>
                        <div class="header-subtitle">Monitor and manage connected AI agents</div>
                    </div>
                </div>

                <div class="grid grid-cols-1" style="margin-bottom: var(--space-8);">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Connected Agents</div>
                            <div class="card-subtitle">Active AI agents using TrustWrapper verification</div>
                        </div>

                        <div id="agents-list">
                            <!-- Agents will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Verifications Page -->
            <div id="verifications" class="page">
                <div class="header">
                    <div>
                        <h1>Verification History</h1>
                        <div class="header-subtitle">Complete verification audit trail</div>
                    </div>
                </div>

                <div class="grid grid-cols-1">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Recent Verifications</div>
                            <div class="card-subtitle">Detailed verification logs and results</div>
                        </div>

                        <div id="verifications-list">
                            <!-- Verifications will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Senpi Skills Page -->
            <div id="senpi" class="page">
                <div class="header">
                    <div>
                        <h1>Senpi Skills Integration</h1>
                        <div class="header-subtitle">Marketplace verification and skill management</div>
                    </div>
                </div>

                <div class="grid grid-cols-2">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Skill Verification Actions</div>
                            <div class="card-subtitle">Available TrustWrapper skills for Senpi</div>
                        </div>

                        <div style="margin-bottom: var(--space-4);">
                            <div style="padding: var(--space-3); background: var(--neutral-50); border-radius: 8px; margin-bottom: var(--space-3);">
                                <div class="text-sm font-medium" style="margin-bottom: var(--space-2);">verifyTradingDecision</div>
                                <div class="text-xs text-muted">Real-time trading validation with risk assessment</div>
                                <span class="badge badge-success" style="margin-top: var(--space-2);">✅ Active</span>
                            </div>

                            <div style="padding: var(--space-3); background: var(--neutral-50); border-radius: 8px; margin-bottom: var(--space-3);">
                                <div class="text-sm font-medium" style="margin-bottom: var(--space-2);">verifySkillPerformance</div>
                                <div class="text-xs text-muted">Marketplace quality scoring and validation</div>
                                <span class="badge badge-success" style="margin-top: var(--space-2);">✅ Active</span>
                            </div>

                            <div style="padding: var(--space-3); background: var(--neutral-50); border-radius: 8px;">
                                <div class="text-sm font-medium" style="margin-bottom: var(--space-2);">generateComplianceReport</div>
                                <div class="text-xs text-muted">Regulatory compliance monitoring and reporting</div>
                                <span class="badge badge-success" style="margin-top: var(--space-2);">✅ Active</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Live Skill Demo</div>
                            <div class="card-subtitle">Test TrustWrapper skills in real-time</div>
                        </div>

                        <div id="skill-demo-container">
                            <button class="button button-primary" style="width: 100%; margin-bottom: var(--space-3);" onclick="demoTradingVerification()">
                                🎯 Demo Trading Verification
                            </button>

                            <button class="button button-secondary" style="width: 100%; margin-bottom: var(--space-3);" onclick="demoSkillPerformance()">
                                📊 Demo Skill Performance
                            </button>

                            <button class="button button-secondary" style="width: 100%;" onclick="demoComplianceReport()">
                                📋 Demo Compliance Report
                            </button>
                        </div>

                        <div id="demo-results" style="margin-top: var(--space-4); display: none;">
                            <!-- Demo results will be shown here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Other pages (trading, compliance, alerts, settings) would be similar structures -->
            <div id="trading" class="page">
                <div class="header">
                    <h1>Trading Analysis</h1>
                    <div class="header-subtitle">Real-time trading verification and analysis</div>
                </div>
                <div class="card">
                    <div class="card-title">Trading analysis features coming soon...</div>
                </div>
            </div>

            <div id="compliance" class="page">
                <div class="header">
                    <h1>Compliance Monitoring</h1>
                    <div class="header-subtitle">Regulatory compliance and audit trails</div>
                </div>
                <div class="card">
                    <div class="card-title">Compliance monitoring features coming soon...</div>
                </div>
            </div>

            <div id="alerts" class="page">
                <div class="header">
                    <h1>Alert Configuration</h1>
                    <div class="header-subtitle">Notification settings and alert management</div>
                </div>
                <div class="card">
                    <div class="card-title">Alert configuration features coming soon...</div>
                </div>
            </div>

            <div id="settings" class="page">
                <div class="header">
                    <h1>System Configuration</h1>
                    <div class="header-subtitle">TrustWrapper settings and preferences</div>
                </div>
                <div class="card">
                    <div class="card-title">System configuration features coming soon...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state management
        let apiStatus = {
            nowNodes: 'checking',
            coinGecko: 'checking',
            trustWrapper: 'operational'
        };

        let liveData = {
            btcPrice: null,
            ethPrice: null,
            blockHeight: null,
            testBalance: null
        };

        // Page navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });

            // Remove active from all sidebar items
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
            });

            // Show selected page
            document.getElementById(pageId).classList.add('active');

            // Add active to clicked sidebar item
            event.target.closest('.sidebar-item').classList.add('active');

            // Load page-specific data
            loadPageData(pageId);
        }

        // Load data for specific pages
        function loadPageData(pageId) {
            switch(pageId) {
                case 'dashboard':
                    refreshData();
                    break;
                case 'agents':
                    loadAgentsData();
                    break;
                case 'verifications':
                    loadVerificationsData();
                    break;
                case 'senpi':
                    loadSenpiData();
                    break;
            }
        }

        // Initialize dashboard
        window.addEventListener('DOMContentLoaded', function() {
            testApiConnections();
            loadMarketData();
            startLiveUpdates();
            loadActivityFeed();
        });

        // Test API connections
        async function testApiConnections() {
            document.getElementById('api-status-text').textContent = 'Testing API connections...';

            // Test CoinGecko API
            try {
                const response = await fetch('https://api.coingecko.com/api/v3/ping');
                if (response.ok) {
                    apiStatus.coinGecko = 'operational';
                    document.getElementById('coingecko-status').textContent = '✅ Connected';
                    document.getElementById('coingecko-status').className = 'badge badge-success';
                } else {
                    throw new Error('API Error');
                }
            } catch (error) {
                apiStatus.coinGecko = 'limited';
                document.getElementById('coingecko-status').textContent = '⚠️ Rate Limited';
                document.getElementById('coingecko-status').className = 'badge badge-warning';
            }

            // NOWNodes status (using mock since CORS)
            apiStatus.nowNodes = 'limited';
            document.getElementById('nownodes-status').textContent = '⚠️ CORS Limited';
            document.getElementById('nownodes-status').className = 'badge badge-warning';

            updateApiStatusAlert();
        }

        // Load live market data
        async function loadMarketData() {
            try {
                const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd&include_24hr_change=true');

                if (response.ok) {
                    const data = await response.json();

                    // Update BTC price
                    if (data.bitcoin) {
                        liveData.btcPrice = data.bitcoin.usd;
                        document.getElementById('btc-price').textContent = `$${data.bitcoin.usd.toLocaleString()}`;

                        const btcChange = data.bitcoin.usd_24h_change;
                        const changeElement = document.getElementById('btc-change');
                        changeElement.textContent = `${btcChange > 0 ? '+' : ''}${btcChange.toFixed(2)}%`;
                        changeElement.className = `price-change ${btcChange > 0 ? 'positive' : 'negative'}`;
                    }

                    // Update ETH price
                    if (data.ethereum) {
                        liveData.ethPrice = data.ethereum.usd;
                        document.getElementById('eth-price').textContent = `$${data.ethereum.usd.toLocaleString()}`;

                        const ethChange = data.ethereum.usd_24h_change;
                        const changeElement = document.getElementById('eth-change');
                        changeElement.textContent = `${ethChange > 0 ? '+' : ''}${ethChange.toFixed(2)}%`;
                        changeElement.className = `price-change ${ethChange > 0 ? 'positive' : 'negative'}`;
                    }

                    // Update timestamp
                    document.getElementById('price-timestamp').textContent = new Date().toLocaleTimeString();

                } else {
                    throw new Error('Failed to fetch market data');
                }
            } catch (error) {
                console.log('Market data error:', error);
                document.getElementById('btc-price').textContent = '$45,123 (Mock)';
                document.getElementById('eth-price').textContent = '$2,456 (Mock)';
                document.getElementById('price-timestamp').textContent = new Date().toLocaleTimeString() + ' (Mock)';
            }
        }

        // Test blockchain connection
        async function testBlockchainConnection() {
            document.getElementById('eth-network-status').textContent = 'Testing...';
            document.getElementById('eth-latest-block').textContent = 'Loading...';
            document.getElementById('test-balance').textContent = 'Checking...';

            // Simulate blockchain data (NOWNodes would be CORS blocked)
            setTimeout(() => {
                document.getElementById('eth-network-status').textContent = '✅ Connected (Mock)';
                document.getElementById('eth-latest-block').textContent = '18,945,123';
                document.getElementById('test-balance').textContent = '1.234 ETH';

                addActivityItem('🔗', 'Blockchain connection tested', 'Ethereum network verification successful', 'Just now');
            }, 2000);
        }

        // Update API status alert
        function updateApiStatusAlert() {
            const alert = document.getElementById('api-status-alert');
            const statusText = document.getElementById('api-status-text');

            const operationalCount = Object.values(apiStatus).filter(status => status === 'operational').length;

            if (operationalCount >= 2) {
                alert.className = 'alert alert-success';
                statusText.textContent = 'APIs operational - Live market data available with graceful blockchain fallbacks';
            } else if (operationalCount >= 1) {
                alert.className = 'alert alert-warning';
                statusText.textContent = 'Partial API access - Demo functionality available with mock blockchain data';
            } else {
                alert.className = 'alert alert-trust';
                statusText.textContent = 'Using mock data - Full demo functionality available for partnership presentation';
            }
        }

        // Activity feed management
        function loadActivityFeed() {
            const activities = [
                ['✅', 'Live market data loaded', 'BTC and ETH prices updated from CoinGecko', '2 minutes ago'],
                ['🤖', 'Agent verification completed', 'Senpi Trading Bot v2.1 verified successfully', '5 minutes ago'],
                ['📊', 'Performance analysis', 'Trading performance scored 94% accuracy', '8 minutes ago'],
                ['🛡️', 'Trust score updated', 'Overall system trust score: A+', '12 minutes ago'],
                ['🔗', 'API connection tested', 'Market data integration validated', '15 minutes ago']
            ];

            const feed = document.getElementById('activity-feed');
            feed.innerHTML = '';

            activities.forEach(([icon, title, description, time]) => {
                addActivityItem(icon, title, description, time);
            });
        }

        // Add new activity item
        function addActivityItem(icon, title, description, time) {
            const feed = document.getElementById('activity-feed');
            const newItem = document.createElement('div');
            newItem.className = 'activity-item';
            newItem.innerHTML = `
                <div class="activity-icon badge-success">
                    <span>${icon}</span>
                </div>
                <div class="activity-content">
                    <div class="activity-title">${title}</div>
                    <div class="activity-description">${description}</div>
                    <div class="activity-time">${time}</div>
                </div>
            `;

            feed.insertBefore(newItem, feed.firstChild);

            // Remove oldest items if more than 6
            while (feed.children.length > 6) {
                feed.removeChild(feed.lastChild);
            }
        }

        // Load agents data
        function loadAgentsData() {
            const agentsList = document.getElementById('agents-list');
            if (!agentsList) return;

            const agents = [
                { id: 'senpi-trading-v2', name: 'Senpi Trading Bot v2.1', status: 'active', verifications: 234, lastSeen: '2 minutes ago' },
                { id: 'defi-guardian', name: 'DeFi Guardian Agent', status: 'active', verifications: 156, lastSeen: '5 minutes ago' },
                { id: 'risk-analyzer', name: 'Risk Analysis Agent', status: 'active', verifications: 89, lastSeen: '10 minutes ago' },
                { id: 'compliance-monitor', name: 'Compliance Monitor', status: 'active', verifications: 45, lastSeen: '1 hour ago' },
                { id: 'market-scout', name: 'Market Scout Agent', status: 'idle', verifications: 23, lastSeen: '3 hours ago' }
            ];

            agentsList.innerHTML = agents.map(agent => `
                <div style="padding: var(--space-4); border: 1px solid var(--neutral-200); border-radius: 8px; margin-bottom: var(--space-3);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-2);">
                        <div class="text-sm font-medium">${agent.name}</div>
                        <span class="badge ${agent.status === 'active' ? 'badge-success' : 'badge-warning'}">
                            ${agent.status === 'active' ? '✅ Active' : '⏸️ Idle'}
                        </span>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Agent ID:</div>
                        <div class="data-value">${agent.id}</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Verifications:</div>
                        <div class="data-value">${agent.verifications}</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Last Seen:</div>
                        <div class="data-value">${agent.lastSeen}</div>
                    </div>
                </div>
            `).join('');
        }

        // Load verifications data
        function loadVerificationsData() {
            const verificationsList = document.getElementById('verifications-list');
            if (!verificationsList) return;

            const verifications = [
                { id: 'ver-001', type: 'Trading Decision', agent: 'Senpi Trading Bot', result: 'Approved', confidence: 94, timestamp: '2 minutes ago' },
                { id: 'ver-002', type: 'Skill Performance', agent: 'DeFi Guardian', result: 'Verified', confidence: 89, timestamp: '5 minutes ago' },
                { id: 'ver-003', type: 'Compliance Check', agent: 'Risk Analyzer', result: 'Passed', confidence: 97, timestamp: '8 minutes ago' },
                { id: 'ver-004', type: 'Trading Decision', agent: 'Senpi Trading Bot', result: 'Warning', confidence: 76, timestamp: '12 minutes ago' },
                { id: 'ver-005', type: 'Performance Review', agent: 'Market Scout', result: 'Approved', confidence: 85, timestamp: '15 minutes ago' }
            ];

            verificationsList.innerHTML = verifications.map(ver => `
                <div style="padding: var(--space-4); border: 1px solid var(--neutral-200); border-radius: 8px; margin-bottom: var(--space-3);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-2);">
                        <div class="text-sm font-medium">${ver.type}</div>
                        <span class="badge ${ver.result === 'Approved' || ver.result === 'Verified' || ver.result === 'Passed' ? 'badge-success' : 'badge-warning'}">
                            ${ver.result}
                        </span>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Verification ID:</div>
                        <div class="data-value">${ver.id}</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Agent:</div>
                        <div class="data-value">${ver.agent}</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Confidence:</div>
                        <div class="data-value">${ver.confidence}%</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Timestamp:</div>
                        <div class="data-value">${ver.timestamp}</div>
                    </div>
                </div>
            `).join('');
        }

        // Load Senpi-specific data
        function loadSenpiData() {
            // Senpi page is already populated with static content
            // Could add dynamic skill metrics here
        }

        // Skill demo functions
        function demoTradingVerification() {
            const resultsDiv = document.getElementById('demo-results');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = `
                <div class="alert alert-success">
                    <strong>🎯 Trading Verification Demo Complete!</strong><br>
                    Decision: Buy 0.1 BTC at $${liveData.btcPrice || '45,123'}<br>
                    Trust Score: 92/100 • Risk Level: Low • Recommendation: Approved
                </div>
                <div style="margin-top: var(--space-3);">
                    <div class="data-row">
                        <div class="data-label">Market Data Verified:</div>
                        <div class="data-value">✅ Real-time pricing confirmed</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Risk Analysis:</div>
                        <div class="data-value">✅ Low volatility detected</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Compliance Check:</div>
                        <div class="data-value">✅ Regulatory approved</div>
                    </div>
                </div>
            `;

            addActivityItem('🎯', 'Trading verification demo', 'BTC purchase decision verified with 92% confidence', 'Just now');
        }

        function demoSkillPerformance() {
            const resultsDiv = document.getElementById('demo-results');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = `
                <div class="alert alert-success">
                    <strong>📊 Skill Performance Demo Complete!</strong><br>
                    Skill: Senpi Trading Bot v2.1<br>
                    Performance Score: 94/100 • Quality Rank: Top 5% • Status: Verified
                </div>
                <div style="margin-top: var(--space-3);">
                    <div class="data-row">
                        <div class="data-label">Accuracy Rate:</div>
                        <div class="data-value">94.2%</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Profit Factor:</div>
                        <div class="data-value">2.3x</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Risk Score:</div>
                        <div class="data-value">Low (0.15)</div>
                    </div>
                </div>
            `;

            addActivityItem('📊', 'Skill performance demo', 'Trading bot scored 94% accuracy rating', 'Just now');
        }

        function demoComplianceReport() {
            const resultsDiv = document.getElementById('demo-results');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = `
                <div class="alert alert-success">
                    <strong>📋 Compliance Report Demo Complete!</strong><br>
                    Agent: Senpi Trading Bot v2.1<br>
                    Compliance Status: Fully Compliant • Score: 98/100 • Last Audit: June 2025
                </div>
                <div style="margin-top: var(--space-3);">
                    <div class="data-row">
                        <div class="data-label">Regulatory Framework:</div>
                        <div class="data-value">✅ US Securities Compliant</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Risk Management:</div>
                        <div class="data-value">✅ All protocols followed</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Audit Trail:</div>
                        <div class="data-value">✅ Complete transaction logs</div>
                    </div>
                </div>
            `;

            addActivityItem('📋', 'Compliance report demo', 'Regulatory compliance verified at 98% score', 'Just now');
        }

        // Live updates
        function startLiveUpdates() {
            // Update market data every 30 seconds
            setInterval(loadMarketData, 30000);

            // Add random activity every 10-30 seconds
            setInterval(() => {
                if (Math.random() < 0.3) { // 30% chance
                    const events = [
                        ['🔍', 'Verification completed', 'Agent decision verified successfully', 'Just now'],
                        ['📈', 'Market analysis', 'Price trend analysis completed', 'Just now'],
                        ['🛡️', 'Risk assessment', 'Low risk profile confirmed', 'Just now'],
                        ['⚡', 'Real-time update', 'Live data feeds synchronized', 'Just now']
                    ];

                    const randomEvent = events[Math.floor(Math.random() * events.length)];
                    addActivityItem(...randomEvent);
                }
            }, 15000);
        }

        // Button handlers
        function refreshData() {
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = '<span class="loading-spinner"></span> Refreshing...';
            button.disabled = true;

            Promise.all([
                testApiConnections(),
                loadMarketData(),
                testBlockchainConnection()
            ]).then(() => {
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.disabled = false;
                    addActivityItem('🔄', 'Dashboard refreshed', 'All data sources updated successfully', 'Just now');
                }, 1000);
            });
        }

        function runVerification() {
            addActivityItem('🎯', 'Manual verification started', 'Processing new verification request', 'Just now');
            demoTradingVerification();
        }

        function contactSenpi() {
            addActivityItem('📧', 'Partnership contact initiated', 'Senpi team contact request sent', 'Just now');
            alert('🤝 Partnership Contact\n\nThis would initiate contact with Jason Goldberg and the Senpi team to discuss the $425K-5.8M partnership opportunity.\n\nNext steps:\n1. Schedule partnership presentation\n2. Demonstrate technical integration\n3. Negotiate revenue sharing terms\n4. Launch verified AI marketplace');
        }
    </script>
</body>
</html>
